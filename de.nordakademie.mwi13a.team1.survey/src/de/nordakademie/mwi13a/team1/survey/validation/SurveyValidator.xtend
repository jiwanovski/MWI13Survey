/*
 * generated by Xtext
 */
package de.nordakademie.mwi13a.team1.survey.validation

import org.eclipse.xtext.validation.CheckType
import org.eclipse.xtext.validation.Check
import de.nordakademie.mwi13a.team1.survey.survey.SurveyPackage
import de.nordakademie.mwi13a.team1.survey.survey.Survey
import de.nordakademie.mwi13a.team1.survey.survey.Questionnaire
import de.nordakademie.mwi13a.team1.survey.survey.Part
//import de.nordakademie.mwi13a.team1.survey.survey.Question
//import de.nordakademie.mwi13a.team1.survey.survey.DropDown

class SurveyValidator extends AbstractSurveyValidator {

	@Check(CheckType.FAST)
	def SurveyContainsQuestionnaire (Survey survey) {
		if(survey.questionnaire.empty) 
			warning("A Survey must at contain at least 1 Questionnaire!", 
				SurveyPackage.Literals.SURVEY__QUESTIONNAIRE
			)
	}
	
	@Check(CheckType.FAST)
	def QuestionnaireContainsPart (Questionnaire questionnaire) {
		if(questionnaire.part.empty) 
			warning("A Questionnaire must contain at least 1 Part!", 
				SurveyPackage.Literals.QUESTIONNAIRE__NAME
			)
	}
	
	@Check(CheckType.FAST)
	def PartContainsQuestion (Part part) {
		if(part.question.empty) 
			warning("A Part must contain at least 1 Question!", 
				SurveyPackage.Literals.PART__NAME
			)
	}
			
//	@Check(CheckType.FAST)
//	def IDQuestionnaire (Survey survey) {
//		//var listeFragebogen = new ArrayList[Umfrage.fragebogen]
//		
//		for(id : survey.questionnaire.id)
//		
//		var duplicate = survey.questionnaire.findFirst[]
//		//if (duplicate != null)
//		//	error("Doppelte ID in Umfrage", MyDSLPackage.Literals.FRAGEBOGEN__NAME)
//		
//		if (survey.questionnaire.exists[it == survey.questionnaire && it.id == survey.questionnaire.id])
//			error("Doppelte ID in Fragebogen", SurveyPackage.Literals.QUESTIONNAIRE__NAME)
//	}
		
//	@Check(CheckType.FAST)
//	def DropboxWith2Answers (Question question) {
//		//if (frage.dropdown != null)
//		if(question.type == DropDown){
//			if (question.answer.size <= 2){
//				error("A DropDown must contain at least 2 Answers!", 
//				SurveyPackage.Literals.QUESTION__NAME)
//			}
//		}
//	}
}
